function eventBeforeOpenModel__viewer(e){var t=[],n="."+e.classPicked+"."+e.classCellHasEvent;return $(n).each(function(n,a){t.push($(a).attr(e.attributeDate))}),$("."+e.classPicked).removeClass(e.classPicked),t}function showProress(e){if(hideProress(),e){var t=document.createElement("div");t.id="js-dom-temp-proress",t.className="progress progress-success";var n=document.createElement("div");n.className="progress-loadding",t.appendChild(n),e.appendChild(t)}}function hideProress(){document.getElementById("js-dom-temp-proress")&&document.getElementById("js-dom-temp-proress").remove()}function eventAfterOpenModel__viewer(e,t){document.getElementById(e.idModalButtonTimeClose).onclick=function(t){t.preventDefault(),$("."+e.classPicked).removeClass(e.classPicked),e.modelClose()},document.getElementById(e.idModalButtonGotoChat).onclick=function(n){if(this.classList.contains("goto-login"))return!0;n.preventDefault(),document.getElementById(e.idModalCalendar)&&showProress(document.getElementById(e.idModalCalendar));var a=e.selector.getAttribute("data-employer"),d=e.selector.getAttribute("data-sitter"),l=e.selector.getAttribute("data-refesh");if(a&&d){var o=null;if(t.length){o="雇用者が選んだ日付：\n";for(let n=0;n<t.length;n++)o+=e.selectYear+"/",o+=e.selectMonth+"/",o+=t[n]+"\n"}var r={};r.localUserId=parseInt(a),r.referenceUserId=parseInt(d),r.refesh=l,r.message=o,r.dates=t,r.monthSelect=e.selectMonth,r.yearSelect=e.selectYear;var i=detectClient();return Object.assign(r,i),fetch(SYSTEM_REAL_TIME_URL+"/api/channel",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{console.log(e),200==e.code?"undefined"!=typeof ID_VIEW_SITTER?window.location.replace(SYSTEM_CHAT_EMPLOYER+"/"+ID_VIEW_SITTER):window.location.replace(SYSTEM_CHAT_EMPLOYER):(setTimeout(function(){hideProress()},1e3),alert("エラーがあります。ページを更新するか、管理者に連絡してください"))}).catch(e=>!1)}}}function createModelCalendar__viewer(e){var t=document.createElement("div");t.className=e.classModal+" d-none",t.id=e.idModalCalendar;var n=document.createElement("div");n.className=e.classModalHeader;var a=document.createElement("span");a.id=e.idModalTextTime,n.appendChild(a);var d=document.createElement("button");if(d.id=e.idModalButtonTimeClose,d.className="time-close",d.innerHTML="x",n.appendChild(d),t.appendChild(n),e.selector.getAttribute("data-employer")&&e.selector.getAttribute("data-sitter")){(o=document.createElement("div")).className=e.classModalBody,o.innerHTML="チャットに行くことができます",t.appendChild(o),(r=document.createElement("div")).className="wrapper-button";var l=document.createElement("button");l.id=e.idModalButtonGotoChat,l.className="goto-chat",l.innerHTML="チャットに行きます",r.appendChild(l),t.appendChild(r)}else{var o,r;(o=document.createElement("div")).className=e.classModalBody,o.innerHTML="利用者ログインを行ってから再度日程を指定してください。",t.appendChild(o),(r=document.createElement("div")).className="wrapper-button";var i=document.createElement("a");i.id=e.idModalButtonGotoChat,i.className="goto-login",i.href="/employer/login/VIEW_SITTER/"+ID_VIEW_SITTER,i.innerHTML="利用者ログイン",r.appendChild(i),t.appendChild(r)}return t}function eventBeforeOpenModel__selector(e){var t=[],n="."+e.classPicked;return $(n).each(function(n,a){t.push($(a).attr(e.attributeDate))}),t}function eventAfterOpenModel__selector(e,t){document.getElementById(e.idModalButtonNew).onclick=function(n){n.preventDefault();var a=document.getElementById(e.idModalHourBegin),d=document.getElementById(e.idModalMinuteBegin),l=document.getElementById(e.idModalHourEnd),o=document.getElementById(e.idModalMinuteEnd),r=document.getElementById(e.idModalCheckFirst),i=document.getElementById(e.idModalCheckLast),c=[];r.checked&&c.push("1"),i.checked&&c.push("2");var s=","+c.join()+",";n={start:e.formatZeroBefore(a.value)+":"+e.formatZeroBefore(d.value),finish:e.formatZeroBefore(l.value)+":"+e.formatZeroBefore(o.value),overnight:0,status:0,type:s};checkValidTime()&&(e.overrideEvent(t,n),$("."+e.classPicked).removeClass(e.classPicked),e.modelClose(),$("#js-event-data").valid())},document.getElementById(e.idModalButtonEdit).onclick=function(n){n.preventDefault();var a=document.getElementById(e.idModalHourBegin),d=document.getElementById(e.idModalMinuteBegin),l=document.getElementById(e.idModalHourEnd),o=document.getElementById(e.idModalMinuteEnd),r=document.getElementById(e.idModalCheckFirst),i=document.getElementById(e.idModalCheckLast),c=[];r.checked&&c.push("1"),i.checked&&c.push("2");var s=null;c.length&&(s=","+c.join()+",");n={start:e.formatZeroBefore(a.value)+":"+e.formatZeroBefore(d.value),finish:e.formatZeroBefore(l.value)+":"+e.formatZeroBefore(o.value),overnight:0,status:0,type:s};checkValidTime()&&(e.updateEvent(t[0],n),$("."+e.classPicked).removeClass(e.classPicked),e.modelClose(),$("#js-event-data").valid())},document.getElementById(e.idModalButtonDelete).onclick=function(n){n.preventDefault(),e.deleteEvent(t[0]),$("."+e.classPicked).removeClass(e.classPicked),e.modelClose(),$("#js-event-data").valid()},document.getElementById(e.idModalButtonTimeClose).onclick=function(t){t.preventDefault(),$("."+e.classPicked).removeClass(e.classPicked),e.modelClose(),$("#js-event-data").valid(),$("#check-time").valid()}}function createModelCalendar__selector(e){var t=document.createElement("div");t.className=e.classModal+" d-none",t.id=e.idModalCalendar;var n=document.createElement("div");n.className=e.classModalHeader;var a=document.createElement("span");a.id=e.idModalTextTime,a.innerHTML="00月00日(火)",n.appendChild(a);var d=document.createElement("button");d.id=e.idModalButtonTimeClose,d.className="time-close",d.innerHTML="x",n.appendChild(d),t.appendChild(n);var l=document.createElement("div");l.className=e.classModalBody;var o=document.createElement("p");o.className=e.classModalBodyTitle,o.innerHTML="予約可能　11：00～22：00",l.appendChild(o);var r=document.createElement("div");r.className=e.wrapperInput;var i=document.createElement("INPUT");i.id=e.idModalHourBegin,i.name=e.nameModalHourBegin,i.type=e.typeNumber,i.min=0,i.max=23;var c=document.createElement("span");c.innerHTML="：";var s=document.createElement("INPUT");s.id=e.idModalMinuteBegin,s.name=e.nameModalMinuteBegin,s.type=e.typeNumber,s.min=0,s.max=59;var m=document.createElement("span");m.innerHTML="～";var u=document.createElement("INPUT");u.id=e.idModalHourEnd,u.name=e.nameModalHourEnd,u.type=e.typeNumber,u.min=0,u.max=23;var p=document.createElement("span");p.innerHTML="：";var v=document.createElement("INPUT");v.id=e.idModalMinuteEnd,v.name=e.nameModalMinuteEnd,v.type=e.typeNumber,v.min=0,v.max=59,r.appendChild(i),r.appendChild(c),r.appendChild(s),r.appendChild(m),r.appendChild(u),r.appendChild(p),r.appendChild(v),l.appendChild(r);var E=document.createElement("div");E.className=e.wrapperCheckBox;var M=document.createElement("INPUT");M.id=e.idModalCheckFirst,M.setAttribute("type","checkbox"),M.setAttribute("name",e.idModalCheckFirst);var h=document.createElement("LABEL");h.innerHTML="ベビーシッター",h.htmlFor=e.idModalCheckFirst;var C=document.createElement("INPUT");C.id=e.idModalCheckLast,C.setAttribute("type","checkbox"),C.setAttribute("name",e.idModalCheckLast);var f=document.createElement("LABEL");f.innerHTML="家事代行",f.htmlFor=e.idModalCheckLast,E.appendChild(M),E.appendChild(h),E.appendChild(C),E.appendChild(f),l.appendChild(E),t.appendChild(l);var B=document.createElement("div");B.className="wrapper-button";var g=document.createElement("button");g.id=e.idModalButtonNew,g.innerHTML="予定をコピーする";var y=document.createElement("button");y.id=e.idModalButtonEdit,y.innerHTML="編集する";var I=document.createElement("button");return I.id=e.idModalButtonDelete,I.innerHTML="削除する",B.appendChild(g),B.appendChild(y),B.appendChild(I),t.appendChild(B),t}function checkValidTime(){var e=$("#js-hour-begin").val().trim(),t=$("#js-minute-begin").val().trim(),n=$("#js-hour-end").val().trim(),a=$("#js-minute-end").val().trim(),d=n+":"+a+":00";if(validateTime(e+":"+t+":00")&&validateTime(d)){var l=new Date;l.setHours(e),l.setMinutes(t),l.setSeconds(0);var o=new Date;if(o.setHours(n),o.setMinutes(a),o.setSeconds(0),o>l)return!0}return!1}function validateTime(e){return/^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/.test(e)}$(document).ready(function(){var e=document.getElementById("mypage-sitter");if(document.getElementById("data")&&e){var t=document.getElementById("draw-calendar"),n=document.getElementById("js-event-data"),a=document.getElementById("data").innerHTML;if(t)(d=new Calendar).setNewCalendarSelector(!0),d.setEventData(JSON.parse(a)),d.setElementDraw(t),d.draw()}e=document.getElementById("sitter-mypage-edit");if(document.getElementById("data")&&e){t=document.getElementById("draw-calendar"),n=document.getElementById("js-event-data"),a=document.getElementById("js-event-data").value;if(t)(d=new Calendar).setNewCalendarSelector(!0),d.setEventData(JSON.parse(a)),d.setElementDraw(t),d.setInputEventData(n),d.setBeforeOpenModel(eventBeforeOpenModel__selector),d.setAfterOpenModel(eventAfterOpenModel__selector),d.setCreateModel(createModelCalendar__selector),d.draw()}if(document.getElementById("view-sitter-page")){var d;t=document.getElementById("draw-calendar"),n=document.getElementById("js-event-data");if(a=document.getElementById("data").innerHTML,t)(d=new Calendar).setEventData(JSON.parse(a)),d.setElementDraw(t),d.setInputEventData(n),d.setBeforeOpenModel(eventBeforeOpenModel__viewer),d.setAfterOpenModel(eventAfterOpenModel__viewer),d.setCreateModel(createModelCalendar__viewer),d.draw()}});