function showErrorSystem(e){alert(" có lỗi "),console.log(e)}function showImage__InputCKFinder(e,t){var n=$(t).closest(".wrapper__selectImageWithCKFinder"),i=n.find(".output-image-finder");i&&i.remove();var a=n.find("input.img__outputCKFinder");a&&(a.val(e),a.valid());var l=document.createElement("img");l.id="output-image-finder",l.className="output-image-finder",l.src=e,n.find("input.img__outputCKFinder").parent().append(l)}function selectImageWithCKFinder(e){CKFinder.popup({chooseFiles:!0,width:800,height:600,onInit:function(t){t.on("files:choose",function(t){showImage__InputCKFinder(t.data.files.first().getUrl(),e)}),t.on("file:choose:resizedImage",function(t){showImage__InputCKFinder(t.data.resizedUrl,e)})}})}function createSlug(e){return e=e.toLowerCase(),wanakana&&(e=wanakana.toRomaji(e)),e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi,"a")).replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi,"e")).replace(/i|í|ì|ỉ|ĩ|ị/gi,"i")).replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi,"o")).replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi,"u")).replace(/ý|ỳ|ỷ|ỹ|ỵ/gi,"y")).replace(/đ/gi,"d")).replace(/[\u00C0-\u00C5]/gi,"a")).replace(/[\u00C8-\u00CB]/gi,"e")).replace(/[\u00CC-\u00CF]/gi,"i")).replace(/[\u00D2-\u00D6]/gi,"o")).replace(/[\u00D9-\u00DC]/gi,"u")).replace(/[\u00D1]/gi,"n")).trim().replace(/ /g,"-")).replace(/[\-]{2}/g,"")}function isExistSlug(e){var t=createSlug(e);if(!t)return!1;$("input[name=slug]").val(t),$("#result-slug").remove(),$("button[type=submit]").attr("disabled",!0),fetch(ACTION_CHECK_SLUG+"/"+t,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.ok?showResultSlugExisted(!0):showResultSlugExisted(!1)).catch(e=>{alert("có lỗi")})}function showResultSlugExisted(e){var t="slug đã tồn tại",n="text-color-danger";e||(t="slug chưa tồn tại",n="text-color-success-color-dark");var i=document.createElement("p");i.id="result-slug",i.className=n,i.textContent=t,$("input[name=slug]").parent().append(i),$("button[type=submit]").attr("disabled",e)}function runSelect2Single(e){e.select2({language:{noResults:function(){return"không có kết quả trùng khớp"}}})}function runSelect2Multi(e){e.select2({language:{noResults:function(){return"không có kết quả trùng khớp"}}})}function removeBlockParent(e){$(e).closest(".js-group-option").remove()}function showAllImagesCkfinderOnload(e){e.each(function(e){var t=$(this).val();t&&showImage__InputCKFinder(t,this)})}function toggleSidebar(){$(".admin-sidebar .block-session").click(function(){$(".admin-sidebar>ul>li").removeClass("open"),$(this).closest("li").addClass("open")})}function listenChangeTypeOption(e){var t=$(e).closest(".js-group-option"),n=t.find('input[name="value_text[]"]'),i=t.find('textarea[name="value_html[]"]'),a=t.find(".cke");1==e.value?(n.removeClass("d-none"),i.addClass("d-none"),a.addClass("d-none")):(n.addClass("d-none"),i.removeClass("d-none"),a.length?a.removeClass("d-none"):CKEDITOR.replace(i.attr("id")))}function addMoreBlock(e){var t=document.getElementsByClassName("js-group-option"),n=null;if(t.length&&(n=t[0]),n){$(n).find("select").select2("destroy");var i=$(n).find(".js-clone-value-option"),a=i.find("input").clone(),l=i.find("textarea").clone(),o=$(n).find("select").clone();a.val(""),a.removeClass("d-none"),l.attr("id","ckeditor-"+t.length),l.attr("style",""),l.addClass("d-none"),o.attr("id","select2-"+t.length),o.val("1");var s=$(n).clone();runSelect2Single($(n).find("select")),s.find("input, textarea").val(""),s.find(".js-clone-value-option").html(""),s.find(".js-clone-value-option").append(a),s.find(".js-clone-value-option").append(l),s.find(".js-clone-select-option").html(""),s.find(".js-clone-select-option").append(o),runSelect2Single(s.find("select")),$(t).last().after(s)}}$(document).ready(function(){$(".js__select_option_type_format").each(function(){if(2==$(this).val()){var e=$(this).closest(".js-group-option").find(".js-clone-value-option");e.find("input").addClass("d-none"),e.find("textarea").removeClass("d-none"),CKEDITOR.replace(e.find("textarea").attr("id"))}});var e=$(".js__single-select"),t=$(".js__multi-select");e.length&&runSelect2Single(e),t.length&&runSelect2Multi(t);var n=$(".img__outputCKFinder");n.length&&showAllImagesCkfinderOnload(n),toggleSidebar()}),$("textarea[id^='editor']").length&&$("textarea[id^='editor']").each(function(e){CKEDITOR.replace($(this).attr("id"))});