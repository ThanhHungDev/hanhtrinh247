function validateForm(e){e.validate({rules:{title:{required:!0,maxlength:255},slug:{required:!0,maxlength:100},excerpt:{required:!0,maxlength:255},content:{required:!0},thumbnail:{required:!0,maxlength:255},site_name:{required:!0,maxlength:255},image_seo:{required:!0,maxlength:255},keyword_seo:{required:!0,maxlength:255},description_seo:{required:!0,maxlength:255}},messages:{title:{required:"bắt buộc phải nhập title",maxlength:"title có độ dài lớn nhất là 255"},slug:{required:"bắt buộc nhập title để tạo slug",maxlength:"độ dài slug được tạo ra không vượt quá 255 kí tự"},excerpt:{required:"bắt buộc nhập đoạn trích",maxlength:"độ dài đoạn trích không vượt quá 255 kí tự"},content:{required:"cần nhập nội dung"},thumbnail:{required:"cần thêm link thumbnail",maxlength:"đường link vượt 255 kí tự"},site_name:{required:"cần thêm site_name cho seo",maxlength:"phần site_name không vượt quá 255 kí tự"},image_seo:{required:"cần nhập hình ảnh để seo tốt hơn",maxlength:"phần hình ảnh không vượt quá 255 kí tự"},keyword_seo:{required:"cần thêm mô tả keyword seo",maxlength:"phần keyword không vượt quá 255 kí tự"},description_seo:{required:"cần thêm mô tả seo",maxlength:"phần mô tả không nên vượt quá 255 kí tự "}}})}function showErrorSystem(e){alert(" có lỗi "),console.log(e)}function deleteSlug(e,t,n){var a=confirm("Có chắc muốn xóa không?");"undefined"==typeof SYSTEM_DELETE_SLUG_ACTION&&showErrorSystem("SYSTEM_DELETE_SLUG_ACTION"),a&&$.ajax({type:"DELETE",url:SYSTEM_DELETE_SLUG_ACTION,data:{slug:e,table:t},dataType:"JSON",success:function(e){200==e.status?$(n).closest("tr").remove():alert(e.message)}})}function showImageToBrowser(e,t){var n=document.getElementsByClassName("output-image-finder");n.length&&n[0].remove(),document.getElementsByClassName(t)[0].value=e;var a=document.createElement("img");a.src=e,a.className="output-image-finder",document.getElementById(t).appendChild(a)}function showImageToInput(e,t){var n=document.createElement("img");n.src=e,n.className="img-input-append";for(var a=t.parentElement,r=a.getElementsByClassName("img-input-append"),i=0;i<r.length;i++)r[i].remove();a.appendChild(n),a.getElementsByTagName("INPUT")[0].value=e}function selectThumbnailWithCKFinder(e){CKFinder.popup({chooseFiles:!0,width:800,height:600,onInit:function(t){t.on("files:choose",function(t){showImageToBrowser(t.data.files.first().getUrl(),e)}),t.on("file:choose:resizedImage",function(t){showImageToBrowser(t.data.resizedUrl,e)})}})}function selectImageInputWithCKFinder(e){CKFinder.popup({chooseFiles:!0,width:800,height:600,onInit:function(t){t.on("files:choose",function(t){showImageToInput(t.data.files.first().getUrl(),e)}),t.on("file:choose:resizedImage",function(t){showImageToInput(t.data.resizedUrl,e)})}})}function createSlug(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.toLowerCase()).replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi,"a")).replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi,"e")).replace(/i|í|ì|ỉ|ĩ|ị/gi,"i")).replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi,"o")).replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi,"u")).replace(/ý|ỳ|ỷ|ỹ|ỵ/gi,"y")).replace(/đ/gi,"d")).replace(/[\u00C0-\u00C5]/gi,"a")).replace(/[\u00C8-\u00CB]/gi,"e")).replace(/[\u00CC-\u00CF]/gi,"i")).replace(/[\u00D2-\u00D6]/gi,"o")).replace(/[\u00D9-\u00DC]/gi,"u")).replace(/[\u00D1]/gi,"n")).trim().replace(/ /g,"-")).replace(/[\-]{2}/g,"")}function isExistSlug(e){var t=createSlug($("#"+e+" input").val());if($("input[name=slug]").val(t),$(document).find(".result-slug").remove(),!t)return!1;$("button[type=submit]").attr("disabled",!0),$.ajax({type:"GET",url:ACTION_CHECK_SLUG+"/"+t,dataType:"JSON",success:function(e){showResultSlugExisted(e.data,t)}})}function showResultSlugExisted(e,t){var n=document.createElement("p");if(n.className=e?"result-slug text-danger px-2 py-2":"result-slug text-success px-2 py-2",n.textContent=e?"slug đã tồn tại":"slug chưa tồn tại",document.getElementById("js-check-slug").appendChild(n),!e||document.getElementsByClassName("js-form-edit").length){var a=document.getElementsByName("old-slug");if(a.length)if(a[0].value!=t)return!1;$("button[type=submit]").attr("disabled",!1)}}function changeCategoryType(e,t,n){var a=n.value;if("undefined"==typeof ADMIN_GET_CATEGORY_BY_TYPE||"undefined"==typeof ADMIN_GET_STYLE_BY_TYPE)return showErrorSystem("changeCategoryType"),!1;$.ajax({type:"GET",url:ADMIN_GET_CATEGORY_BY_TYPE,data:{id:a},dataType:"JSON",success:function(t){showCategory(e,t.data)}}),$.ajax({type:"GET",url:ADMIN_GET_STYLE_BY_TYPE,data:{id:a},dataType:"JSON",success:function(e){showCategoryStyle(t,e.data)}})}function changeCategory(e,t,n){var a=n.value;if("undefined"==typeof ADMIN_GET_TYPE_BY_CATEGORY||"undefined"==typeof ADMIN_GET_STYLE_BY_CATEGORY)return showErrorSystem("ADMIN_GET_TYPE"),!1;$.ajax({type:"GET",url:ADMIN_GET_TYPE_BY_CATEGORY,data:{id:a},dataType:"JSON",success:function(t){showCategoryType(e,t.data)}}),$.ajax({type:"GET",url:ADMIN_GET_STYLE_BY_CATEGORY,data:{id:a},dataType:"JSON",success:function(e){showCategoryStyle(t,e.data)}})}function showCategoryType(e,t){for(var n=$("."+e),a=n.val(),r=[],i=0;i<t.length;i++){var o=t[i].id,u=t[i].name,l=t[i].id==a;r.push(createOptionSelect(o,u,l))}n.find("option").remove(),n.append(r),runSelect2(n)}function showCategoryStyle(e,t){var n=$("."+e);console.log(t);for(var a=[],r=0;r<t.length;r++){var i=t[r].id,o=t[r].name;a.push(createOptionSelect(i,o,!1))}n.find("option").remove(),n.append(a),runSelect2(n)}function showCategory(e,t){var n=$("."+e),a="";void 0!==t[0]&&void 0!==t[0].id&&(a=t[0].id),console.log(a),n.val(a),runSelect2(n)}function createOptionSelect(e,t,n){return"<option value='"+e+"' "+(n?"selected":"")+">"+t+" </option>"}function runSelect2(e){e.select2({language:{noResults:function(){return"không có kết quả trùng khớp"}}})}$(document).ready(function(){var e=$(".js-multi-select");e.length&&runSelect2(e);var t=$(".js-validate-form");t.length&&validateForm(t)}),document.getElementById("editor1")&&CKEDITOR.replace("editor1");