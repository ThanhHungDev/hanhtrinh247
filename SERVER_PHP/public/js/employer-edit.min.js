function validateForm(e){e.validate({submitHandler:function(e){return validateChilds($('input[name="child_number"]').val())},rules:{post_code:{required:!0,maxlength:255},pref:{required:!0,maxlength:255},town:{required:!0,maxlength:255},address:{maxlength:255},first_name_fa:{required:!0,maxlength:255},last_name_fa:{required:!0,maxlength:255},first_name_furigana_fa:{required:!0,maxlength:255},last_name_furigana_fa:{required:!0,maxlength:255},y_birth_fa:{required:!0},m_birth_fa:{required:!0},d_birth_fa:{required:!0},first_name_mom:{required:!0,maxlength:255},last_name_mom:{required:!0,maxlength:255},first_name_furigana_mom:{required:!0,maxlength:255},last_name_furigana_mom:{required:!0,maxlength:255},y_birth_mom:{required:!0},m_birth_mom:{required:!0},d_birth_mom:{required:!0}},messages:{post_code:{required:"郵便番号は必須です",maxlength:"郵便番号は1桁以上、255桁以下でなければなりません。"},pref:{required:"都道府県は必須です"},town:{required:"市区町村は必須です"},first_name_fa:{required:"夫の苗字を入力して下さい。",maxlength:"姓 maxlength is 255 characters"},last_name_fa:{required:"夫の名前を入力して下さい。",maxlength:"名 maxlength is 255 characters"},first_name_furigana_fa:{required:"夫の苗字（フリガナ）を入力して下さい。",maxlength:"セイ maxlength is 255 characters"},last_name_furigana_fa:{required:"夫の名前（フリガナ）を入力して下さい。",maxlength:"メイ maxlength is 255 characters"},y_birth_fa:{required:"誕生年を入力してください"},m_birth_fa:{required:"誕生月を入力してください"},d_birth_fa:{required:"誕生日を入力してください"},first_name_mom:{required:"妻の苗字を入力して下さい。",maxlength:"姓 maxlength is 255 characters"},last_name_mom:{required:"妻の名前を入力して下さい。",maxlength:"名 maxlength is 255 characters"},first_name_furigana_mom:{required:"妻の苗字（フリガナ）を入力して下さい。",maxlength:"セイ maxlength is 255 characters"},last_name_furigana_mom:{required:"妻の名前（フリガナ）を入力して下さい。",maxlength:"メイ maxlength is 255 characters"},y_birth_mom:{required:"妻の生年を入力して下さい。"},m_birth_mom:{required:"妻の生月を入力して下さい。"},d_birth_mom:{required:"妻の生日を入力して下さい。"}},errorPlacement:function(e,a){a=a.closest(".form-validate").find(".form-error");e.appendTo(a)}})}function validateChilds(e){var a=!0;$(".form-error").html("");for(let t=0;t<e;t++){$('input[name="first_name_child_'+t+'"]').val().trim()||(showErrors('input[name="first_name_child_'+t+'"]',1,"お子様の苗字を入力して下さい。"),a=!1),$('input[name="last_name_child_'+t+'"]').val().trim()||(showErrors('input[name="last_name_child_'+t+'"]',1,"お子様の名前を入力して下さい。"),a=!1),$('input[name="first_name_furigana_child_'+t+'"]').val().trim()||(showErrors('input[name="first_name_furigana_child_'+t+'"]',1,"お子様の苗字（フリガナ）を入力して下さい。"),a=!1),$('input[name="last_name_furigana_child_'+t+'"]').val().trim()||(showErrors('input[name="last_name_furigana_child_'+t+'"]',1,"お子様の名前（フリガナ）を入力して下さい。"),a=!1),!$('input[name="gender_child_'+t+'"]:checked').length>0&&(showErrors('input[name="gender_child_'+t+'"]',2,"お子様の性別を選択してください。"),a=!1),""==$('select[name="y_birth_child_'+t+'"]').val()&&(showErrors('select[name="y_birth_child_'+t+'"]',2,"お子様の生年を入力して下さい。"),a=!1),""==$('select[name="m_birth_child_'+t+'"]').val()&&(showErrors('select[name="m_birth_child_'+t+'"]',2,"お子様の生月を入力して下さい。"),a=!1),""==$('select[name="d_birth_child_'+t+'"]').val()&&(showErrors('select[name="d_birth_child_'+t+'"]',2,"お子様の生日を入力して下さい。"),a=!1)}return a}function showErrors(e,a,t){var i="";i=1==a?$(e).parent():$(e).parent().parent(),$(i).find(".form-error").html(t)}$(document).ready(function(){$(".em-identity-card").slick({slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:1e3});var e=$(".editMypage");e.length&&validateForm(e)}),$("#postCode").jpostal({postcode:["#postCode"],address:{"#pref":"%3","#town":"%4, %5"}}),$("#postCode").keyup(function(){let e=$(this).val();e.length<=8?e.length>3&&e.indexOf("-")<0&&$(this).val(e.substr(0,3)+"-"+e.substr(3)):$(this).val(e.substr(0,8))}),$(document).on("click",".child-delete",function(){let e=$(this).attr("data-id");if(e)$("#confirm-form").modal(),$("#confirm-form").attr("data-id",e);else{$(this).parent().parent().remove();let e=$('input[name="child_number"]').val();var a=parseInt($('input[name="number_child_root"]').val());$(".list-child").find(".contain-child-0").each(function(){$(this).find(".label_child_number").text(parseInt(a)+1),$(this).find('input[name^="first_name_child_"]').attr("name","first_name_child_"+a),$(this).find('input[name^="last_name_child_"]').attr("name","last_name_child_"+a),$(this).find('input[name^="first_name_furigana_child_"]').attr("name","first_name_furigana_child_"+a),$(this).find('input[name^="last_name_furigana_child_"]').attr("name","last_name_furigana_child_"+a),$(this).find('input[name^="gender_child_"]').attr("name","gender_child_"+a),$(this).find('select[name^="y_birth_child_"]').attr("name","y_birth_child_"+a),$(this).find('select[name^="m_birth_child_"]').attr("name","m_birth_child_"+a),$(this).find('select[name^="d_birth_child_"]').attr("name","d_birth_child_"+a),$(this).find('input[name^="allergic_"]').attr("name","allergic_"+a),$(this).find('input[name^="chronic_"]').attr("name","chronic_"+a),a+=1});let t=parseInt(e)-1;$('input[name="child_number"]').val(t)}}),$(".btn-accept").click(function(e){let a=$("#confirm-form").attr("data-id"),t=$("#deleteChild").attr("action");$(this).attr("disabled","disabled"),""!=a&&($.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:t,type:"post",dataType:"json",data:{id:a},success:function(e){$(".btn-accept").removeAttr("disabled"),location.reload()}}))}),$(".btn-register").click(function(){validateChilds($('input[name="child_number"]').val())}),$(".add-child").click(function(e){let a=$('input[name="child_number"]').val(),t=a;$("#child-default").find(".label_child_number").text(parseInt(t)+1),$("#child-default").find('input[name="first_name_child_0"]').attr("name","first_name_child_"+t),$("#child-default").find('input[name="last_name_child_0"]').attr("name","last_name_child_"+t),$("#child-default").find('input[name="first_name_furigana_child_0"]').attr("name","first_name_furigana_child_"+t),$("#child-default").find('input[name="last_name_furigana_child_0"]').attr("name","last_name_furigana_child_"+t),$("#child-default").find('input[name="gender_child_0"]').attr("name","gender_child_"+t),$("#child-default").find('select[name="y_birth_child_0"]').attr("name","y_birth_child_"+t),$("#child-default").find('select[name="m_birth_child_0"]').attr("name","m_birth_child_"+t),$("#child-default").find('select[name="d_birth_child_0"]').attr("name","d_birth_child_"+t),$("#child-default").find('input[name="allergic_0"]').attr("name","allergic_"+t),$("#child-default").find('input[name="chronic_0"]').attr("name","chronic_"+t);let i=$("#child-default").html();$(".list-child").append(i),$('input[name="child_number"]').val(parseInt(a)+1),$("#child-default").find('input[name="first_name_child_'+t+'"]').attr("name","first_name_child_0"),$("#child-default").find('input[name="last_name_child_'+t+'"]').attr("name","last_name_child_0"),$("#child-default").find('input[name="first_name_furigana_child_'+t+'"]').attr("name","first_name_furigana_child_0"),$("#child-default").find('input[name="last_name_furigana_child_'+t+'"]').attr("name","last_name_furigana_child_0"),$("#child-default").find('input[name="gender_child_'+t+'"]').attr("name","gender_child_0"),$("#child-default").find('select[name="y_birth_child_'+t+'"]').attr("name","y_birth_child_0"),$("#child-default").find('select[name="m_birth_child_'+t+'"]').attr("name","m_birth_child_0"),$("#child-default").find('select[name="d_birth_child_'+t+'"]').attr("name","d_birth_child_0"),$("#child-default").find('input[name="allergic_'+t+'"]').attr("name","allergic_0"),$("#child-default").find('input[name="chronic_'+t+'"]').attr("name","chronic_0")});